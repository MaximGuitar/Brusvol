export default class Map {
    constructor({ container, center, zoom }) {
        if (!container) throw new Error("Контейнер не определён")

        this.container = container
        this.createMap(center, zoom)
    }

    static key = "ca4ab438-ce96-431f-9eb5-8441c2a35bb3"
    static ymapIsReady = false
    static isLoading = false

    static loadAPI() {
        if (!this.isLoading && !this.ymapIsReady) {
            this.loader = this.startLoad()
            return this.loader
        } else return this.loader
    }

    static startLoad() {
        return new Promise(resolve => {
            this.isLoading = true
            if (Map.ymapIsReady) {
                this.isLoading = false
                resolve("loaded")
                return
            }

            const script = document.createElement("script")
            script.src = `https://api-maps.yandex.ru/v3/?apikey=${this.key}&lang=ru_RU`
            script.addEventListener("load", async () => {
                await ymaps3.ready
                Map.ymapIsReady = true
                this.isLoading = false
                resolve("loaded")
            })
            document.body.append(script)
        })
    }

    static createCustomMarker() {
        const marker = document.createElement("div")
        marker.innerHTML = `
          <svg width="75" height="100" viewBox="0 0 75 100" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M23.0711 2.58378C27.6597 0.747208 32.5684 -0.126744 37.5 0.0148181C42.4316 -0.126744 47.3403 0.747208 51.9289 2.58378C56.5176 4.42035 60.6908 7.18134 64.1959 10.6996C67.701 14.218 70.4653 18.4204 72.3212 23.0526C74.1772 27.6849 75.0863 32.6506 74.9936 37.6492C74.9936 66.0449 40.3021 98.1201 38.7629 99.5199C38.4055 99.8297 37.9506 100 37.4803 100C37.0099 100 36.555 99.8297 36.1976 99.5199C34.7373 98.3201 0.00644497 69.1645 0.00644497 37.6492C-0.0863025 32.6506 0.822824 27.6849 2.67877 23.0526C4.53472 18.4204 7.29895 14.218 10.8041 10.6996C14.3092 7.18134 18.4824 4.42035 23.0711 2.58378Z" fill="#FF7F11"/>
          <path d="M38.3904 12.5958C31.8568 12.5649 25.5781 15.0861 20.9345 19.6053C16.2909 24.1246 13.6624 30.2719 13.627 36.6959C13.7484 39.7764 14.388 42.8158 15.5197 45.6908C26.1427 41.1158 32.2626 34.6178 44.6995 37.417C49.5181 38.5026 54.8967 43.4808 60.8746 47.0167C62.338 43.7576 63.1417 40.2494 63.2405 36.6881C63.221 33.501 62.5623 30.3489 61.3022 27.4123C60.0422 24.4758 58.2055 21.8124 55.8973 19.5746C53.5891 17.3368 50.8547 15.5685 47.8506 14.371C44.8466 13.1735 41.6318 12.5702 38.3904 12.5958Z" fill="white"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M35.8327 34.7653C36.4715 34.7653 40.7775 34.6955 40.7775 34.6955C40.7775 34.6955 43.6324 35.1143 44.1529 35.1608C44.6734 35.2073 45.4226 35.2694 45.5961 34.9282C45.7696 34.587 45.9668 34.2536 44.5393 34.1528C43.1119 34.052 42.615 33.9744 42.615 33.9744L42.1023 33.9279C42.1023 33.8038 42.1023 33.734 42.1023 33.61C42.0659 33.5905 42.0338 33.5641 42.0077 33.5324C42.0077 33.5324 42.0077 33.2765 42.0077 33.2145C41.9544 33.1378 41.912 33.0543 41.8816 32.9664C41.8816 32.9664 41.7159 32.6484 41.4951 32.315C41.3443 32.0954 41.161 31.8994 40.951 31.7334C40.738 31.5163 40.8957 31.4155 40.5487 31.2062C40.2261 31.0585 39.9239 30.8709 39.6497 30.6479C39.4131 30.392 39.4447 30.392 39.216 30.3144C39.0055 30.2596 38.7923 30.2156 38.5771 30.1826V30.1361C38.5771 30.1361 38.6323 30.0663 38.4667 30.012C38.3332 29.9622 38.2103 29.8886 38.104 29.7949C38.0566 29.7329 37.962 29.6321 37.9699 29.5778C37.9942 29.4106 37.9942 29.2409 37.9699 29.0737C37.9304 29.035 37.9699 28.8721 37.9699 28.7093C37.9866 28.6399 38.0104 28.5724 38.0409 28.5077C38.0409 28.5077 38.0409 28.2518 38.0409 28.1898C38.0409 28.1277 38.3406 27.9029 38.4037 27.8718C38.4667 27.8408 38.4036 27.7788 38.5613 27.6702C38.7191 27.5617 38.656 27.4686 38.6954 27.4299C38.7349 27.3911 38.8611 27.0809 38.9005 27.0577C39.0048 26.9334 39.0947 26.7982 39.1686 26.6544C39.3263 26.3908 39.3106 26.3675 39.3816 26.3055L39.5708 26.1272L39.6339 26.0419L39.7364 25.9798L39.9021 25.7394L39.9652 25.6852C39.9652 25.6852 40.1307 25.6852 40.2175 25.4913C40.3042 25.2975 40.3516 25.2819 40.3516 25.2819C40.3516 25.2819 40.4068 25.2199 40.462 25.2819L40.7143 25.3983C40.7616 25.3983 40.9037 25.3983 40.88 25.3983C40.8618 25.3675 40.8342 25.3431 40.8012 25.3285C40.8485 25.3285 40.8957 25.3285 40.9115 25.3285C40.9273 25.3285 40.9115 25.2509 40.8563 25.2199L40.6592 25.1191H40.9431C40.9431 25.1191 41.014 25.0726 40.9431 25.0571C40.8492 25.0379 40.757 25.012 40.6671 24.9795L40.3595 24.8787C40.31 24.8564 40.2562 24.8449 40.2018 24.8449C40.1473 24.8449 40.0935 24.8564 40.044 24.8787C39.8863 24.9252 39.768 24.8787 39.7364 24.995C39.7005 25.1033 39.6584 25.2094 39.6103 25.313C39.563 25.3905 39.6103 25.3827 39.6103 25.3983L39.5078 25.4836C39.4046 25.5338 39.2962 25.5728 39.1844 25.5999C39.1292 25.5999 39.1292 25.6852 39.0582 25.7317C38.9872 25.7782 38.9872 25.8557 38.9478 25.8868C38.9083 25.9178 38.8768 26.0574 38.7506 26.0961C38.6244 26.1349 38.6087 26.2822 38.4904 26.3753L38.3327 26.5071C38.1986 26.5071 38.2538 26.6312 38.1512 26.6312C38.1188 26.6479 38.0902 26.6709 38.0671 26.6989C38.044 26.7269 38.0271 26.7593 38.0172 26.794C37.9984 26.8342 37.9825 26.8756 37.9699 26.9181C37.9442 26.9103 37.9167 26.9103 37.891 26.9181C37.891 26.9181 37.8911 26.9646 37.9305 26.9801H37.8831C37.82 26.9801 37.5914 26.9801 37.5283 27.0577C37.5195 27.0613 37.5101 27.0632 37.5006 27.0632C37.4912 27.0632 37.4817 27.0613 37.473 27.0577C37.2992 26.8497 37.0656 26.6984 36.8027 26.6234C36.6001 26.5843 36.3902 26.6071 36.2012 26.6889C36.0122 26.7707 35.8534 26.9075 35.7459 27.0809C35.6912 27.2005 35.6617 27.3298 35.6592 27.4609V27.6625H35.7144C35.7106 27.7245 35.7106 27.7866 35.7144 27.8486C35.6179 27.9324 35.512 28.0053 35.3989 28.0657C35.2273 28.1806 35.0733 28.319 34.9415 28.4767C34.9415 28.5232 34.8153 28.5232 34.7916 28.7171C34.7514 29.0048 34.7356 29.2952 34.7443 29.5855C34.7443 29.6631 35.1308 30.1438 35.1623 30.2059C35.1939 30.2679 35.1623 30.2059 35.2649 30.3454C35.3674 30.485 35.3516 30.4928 35.3437 30.5005C35.3358 30.5083 34.7837 30.9503 35.2096 31.2759C35.6355 31.6016 35.667 31.6326 35.6907 31.7877C35.7143 31.9428 35.8011 31.8963 35.8957 31.9816C35.9904 32.0669 36.014 32.2995 36.0771 32.5399C36.1402 32.7803 36.1717 32.5864 36.2743 32.8345C36.3768 33.0827 36.5188 33.0672 36.4636 33.261C36.4084 33.4549 36.4636 33.4161 36.4636 33.4394C36.4636 33.4626 36.4162 33.5324 36.4084 33.61L36.3216 33.7108C36.3124 33.7322 36.3088 33.7556 36.3111 33.7788C36.3135 33.802 36.3217 33.8243 36.335 33.8436C36.3483 33.8628 36.3664 33.8785 36.3875 33.8892C36.4086 33.8999 36.432 33.9052 36.4557 33.9046C36.6292 33.9046 34.3737 34.1605 34.3737 34.1605C34.3737 34.1605 33.2222 34.1605 34.2238 34.4164C34.7352 34.6243 35.2798 34.7424 35.8327 34.7653ZM38.1986 33.8116C38.1986 33.8116 38.2459 33.6022 38.1986 33.5557C38.1513 33.5092 38.1355 33.5557 38.1512 33.3618C38.167 33.168 38.1513 33.1214 38.0724 33.0361C37.9935 32.9509 37.7254 32.8811 37.8043 32.7415C37.8831 32.6019 37.6308 31.9661 37.6308 31.9661L38.4194 31.7257C38.5587 31.7931 38.7162 31.8148 38.8689 31.7877C39.2002 31.7877 39.1607 31.9351 39.3737 32.0514C39.5866 32.1677 39.5314 32.0514 39.6576 32.1832C39.7723 32.3092 39.9021 32.4211 40.044 32.5166C40.249 32.6639 40.1229 32.6484 40.2806 32.8113C40.3815 32.9336 40.4589 33.0728 40.5093 33.2222C40.5093 33.2843 40.3043 33.5402 40.2727 33.5479C40.2412 33.5557 40.2018 33.7961 40.2018 33.7961C39.3895 33.7728 38.9872 33.7728 38.1828 33.8116H38.1986Z" fill="#FF7F11"/>
          <path d="M5.84166 61.276C4.72427 58.9035 3.72468 56.4688 2.88184 53.9866C4.17686 53.4184 5.46656 52.8339 6.74973 52.2523C8.36898 51.5184 9.97783 50.7892 11.5739 50.1035C15.4153 48.4543 18.6892 46.503 21.757 44.6745C28.974 40.3728 35.0511 36.7506 44.6969 39.3407C48.2468 40.3092 52.2536 43.3276 56.5079 46.5325C59.8148 49.0236 63.2712 51.6274 66.7789 53.4688C68.5684 54.4132 69.9049 55.1781 70.98 55.8349C70.1882 57.7679 69.3022 59.6844 68.3435 61.5734C68.0932 61.3407 67.8537 61.077 67.6167 60.8162C67.5396 60.7314 67.4629 60.6469 67.3862 60.5639V60.5096L67.3388 60.4631V60.5639C66.8595 61.268 66.2297 61.8608 65.4934 62.3009C65.3199 61.9985 65.1464 61.6805 64.9966 61.3626C65.1203 61.4791 65.2717 61.5634 65.4369 61.6081C65.6021 61.6528 65.7759 61.6563 65.9429 61.6185C65.5045 61.2942 65.155 60.8678 64.9256 60.3778C65.0591 60.5379 65.2261 60.6679 65.4152 60.7589C65.6044 60.8499 65.8113 60.8997 66.0218 60.9051C65.7747 60.7039 65.5959 60.4334 65.5092 60.1297C65.6463 60.2581 65.8179 60.3452 66.0037 60.3809C66.1896 60.4167 66.3819 60.3994 66.5581 60.3313C65.1944 59.4025 64.1168 58.123 63.443 56.6325C63.5457 56.7703 63.6919 56.8708 63.8587 56.9185C64.0256 56.9662 64.2037 56.9583 64.3656 56.8962C64.0428 56.7426 63.7553 56.5258 63.5207 56.2592C63.2861 55.9925 63.1093 55.6815 63.0013 55.3453C63.3404 55.7951 63.6007 55.9734 64.0029 55.8649C63.4438 55.5702 63.0205 55.0763 62.8199 54.4846C62.9567 54.7139 63.1796 54.8814 63.4405 54.951C63.7015 55.0205 63.9799 54.9867 64.2158 54.8568C63.0912 54.6504 62.1946 53.2526 61.4313 52.0625C61.3917 52.0008 61.3524 51.9396 61.3136 51.8792V51.7396L61.2742 51.8094L61.2268 51.7396V51.8792L61.1981 51.9297C60.4858 53.1845 59.6181 54.7131 58.4587 54.9809C58.6993 55.1037 58.9797 55.1277 59.2384 55.0478C59.497 54.9679 59.7129 54.7905 59.8388 54.5544C59.6652 55.1555 59.2646 55.6686 58.719 55.9889C59.1291 56.0742 59.3736 55.8881 59.6969 55.4229C59.5983 55.7525 59.4339 56.0594 59.2131 56.3257C58.9924 56.592 58.7198 56.8123 58.4114 56.9737C58.5743 57.0263 58.7503 57.0252 58.9125 56.9706C59.0747 56.916 59.2144 56.811 59.3105 56.6713C59.0418 57.3161 58.7061 57.932 58.3089 58.5091C57.8689 58.1795 57.507 57.7599 57.2483 57.2792C56.9895 56.7985 56.8402 56.2683 56.8104 55.7253C56.8076 56.4744 56.574 57.2052 56.1404 57.8212C55.7068 58.4371 55.0936 58.9095 54.3814 59.1759C54.6606 59.23 54.9495 59.2089 55.2175 59.1147C55.4854 59.0205 55.7225 58.8568 55.9035 58.6409C55.84 59.1515 55.6393 59.6363 55.3218 60.0452C55.0044 60.4541 54.5818 60.7723 54.0975 60.9671C54.5495 61.0171 55.0068 60.9479 55.4226 60.7667C55.8384 60.5854 56.1976 60.2987 56.4635 59.9358C56.2663 61.254 54.8625 62.014 53.6401 62.4792C54.2999 62.515 54.9571 62.3729 55.5407 62.0682C55.0952 62.9385 54.4532 63.6971 53.6638 64.2859L53.0092 63.5803V63.4795L52.9618 63.526V63.5803C52.4737 64.3051 51.8203 64.9079 51.0534 65.3405C50.7182 64.8443 50.4178 64.3261 50.1543 63.7897C50.2778 63.9069 50.4287 63.9923 50.5938 64.0383C50.7589 64.0843 50.933 64.0895 51.1007 64.0533C50.6617 63.7263 50.3121 63.2974 50.0833 62.8049C50.2177 62.966 50.386 63.0965 50.5766 63.1875C50.7672 63.2786 50.9756 63.3279 51.1874 63.3322C50.933 63.136 50.7502 62.8639 50.6669 62.5568C50.8038 62.6855 50.9759 62.7724 51.1621 62.8068C51.3483 62.8412 51.5407 62.8217 51.7158 62.7506C50.3376 61.8305 49.2457 60.5529 48.5613 59.0596C48.6636 59.1957 48.8084 59.2951 48.9736 59.3427C49.1388 59.3903 49.3153 59.3835 49.4761 59.3232C49.1533 59.1697 48.8657 58.9529 48.6311 58.6862C48.3965 58.4196 48.2197 58.1086 48.1117 57.7724C48.4508 58.2222 48.7111 58.4005 49.1133 58.2997C48.5542 58.0013 48.1313 57.5051 47.9303 56.9117C47.9966 57.0268 48.0854 57.1278 48.1917 57.2089C48.2979 57.29 48.4195 57.3496 48.5493 57.3842C48.6791 57.4188 48.8146 57.4277 48.948 57.4105C49.0813 57.3933 49.2099 57.3503 49.3262 57.2839C48.2072 57.0785 47.314 55.6937 46.5532 54.5141C46.5097 54.4467 46.4666 54.3799 46.424 54.314V54.2442V54.1667C46.4226 54.1925 46.4226 54.2184 46.424 54.2442L46.3767 54.1667V54.314C46.3607 54.342 46.3447 54.3701 46.3285 54.3984C45.6199 55.6396 44.7575 57.1504 43.6085 57.4157C43.8505 57.5358 44.1308 57.5576 44.389 57.4764C44.6472 57.3952 44.8626 57.2174 44.9887 56.9815C44.8151 57.5826 44.4144 58.0957 43.8688 58.416C44.2789 58.5013 44.5312 58.3152 44.8467 57.8499C44.6581 58.5026 44.2201 59.0583 43.6243 59.4008C42.6918 58.7955 41.8412 58.0764 41.0928 57.2606V57.1366L41.0376 57.1986L40.9745 57.1366C40.9703 57.1778 40.9703 57.2194 40.9745 57.2606C40.8888 57.3525 40.8021 57.4464 40.7144 57.5414C39.8172 58.513 38.8062 59.608 37.5202 59.9824C37.351 59.7944 37.2029 59.589 37.0786 59.3698C36.6395 60.2392 35.866 60.8178 35.1115 61.3822C34.9036 61.5377 34.6972 61.692 34.4997 61.8511C35.0727 61.7532 35.6351 61.6026 36.1795 61.4014C35.9112 62.2122 35.3979 62.9182 34.7143 63.4289C34.3147 63.1669 34.0342 62.7625 33.9319 62.3009C34.1054 62.4462 34.3083 62.5538 34.5271 62.6166C34.7459 62.6794 34.9758 62.696 35.2016 62.6653C34.2667 62.0662 33.5103 61.2341 33.0092 60.2538C33.3338 60.2955 33.6625 60.2955 33.9871 60.2538C33.8086 60.2134 33.6322 60.1642 33.4587 60.1064H33.5533C33.2136 59.8744 32.9417 59.559 32.7647 59.1914C32.8739 59.3104 33.0063 59.4066 33.1539 59.4745C33.3015 59.5424 33.4614 59.5806 33.6243 59.5869C33.4293 59.4447 33.2878 59.2429 33.2221 59.0131C33.3281 59.1048 33.4573 59.1669 33.596 59.1928C33.7347 59.2187 33.8779 59.2075 34.0107 59.1604C32.9618 58.4969 32.1209 57.56 31.5817 56.4542C31.6634 56.5592 31.7778 56.6349 31.9074 56.6699C32.037 56.7049 32.1747 56.6973 32.2994 56.648C32.0534 56.5439 31.8319 56.391 31.6487 56.1989C31.4656 56.0067 31.3246 55.7795 31.2348 55.5314C31.5108 55.8571 31.708 55.9889 32.0234 55.9114C31.5944 55.7021 31.2639 55.3383 31.1007 54.8956C31.2157 55.0676 31.392 55.1908 31.595 55.2411C31.798 55.2913 32.0128 55.2649 32.1969 55.167C31.275 55.0134 30.5388 53.9084 29.9424 53.0133L29.9256 52.9881C29.8792 53.0611 29.8323 53.1355 29.785 53.2107C29.2297 54.0929 28.6071 55.082 27.7568 55.2678C27.9445 55.3588 28.1602 55.3766 28.3606 55.3176C28.5611 55.2587 28.7313 55.1273 28.8373 54.9499C28.6935 55.3986 28.3802 55.7761 27.9619 56.0044C28.301 56.0742 28.4982 55.9269 28.7505 55.5935C28.67 55.8439 28.5391 56.0759 28.3657 56.2757C28.1923 56.4755 27.9799 56.639 27.741 56.7566C27.8669 56.8002 28.0039 56.8017 28.1307 56.7611C28.2576 56.7204 28.3673 56.6398 28.443 56.5317C27.9535 57.6627 27.1567 58.6392 26.1401 59.3543C26.2768 59.3916 26.421 59.3941 26.5589 59.3615C26.6969 59.329 26.8241 59.2624 26.9287 59.1682C26.8692 59.3991 26.7367 59.6054 26.5502 59.7575C26.7134 59.7452 26.8725 59.7003 27.0176 59.6257C27.1627 59.551 27.2908 59.4481 27.3941 59.3232C27.2173 59.7015 26.946 60.0296 26.6054 60.277C26.7371 60.2974 26.8716 60.2878 26.9988 60.2488C27.126 60.2098 27.2423 60.1425 27.3388 60.0521C27.3273 60.0725 27.3131 60.0929 27.2987 60.1135C27.264 60.1634 27.2284 60.2144 27.2284 60.2693C27.047 60.3391 26.8735 60.4011 26.7079 60.4476H27.1338C26.9359 60.8382 26.7092 61.2139 26.4556 61.572C25.2783 61.2402 24.3232 59.9191 23.4772 58.7489C23.3938 58.6335 23.3114 58.5196 23.23 58.4083V58.2609L23.1827 58.3385L23.1275 58.2687V58.4083C23.0484 58.5278 22.9685 58.6501 22.8874 58.7741C22.0957 59.9859 21.2021 61.3535 20.036 61.7193C20.3173 61.8148 20.6236 61.8113 20.9026 61.7095C21.1816 61.6077 21.4161 61.4138 21.566 61.161C21.3646 61.7984 20.9435 62.3468 20.3751 62.7118C20.8168 62.7661 21.0849 62.549 21.424 62.0605C21.2109 62.7785 20.7328 63.3924 20.0833 63.7819C20.2664 63.8206 20.4572 63.8026 20.6295 63.7304C20.8018 63.6582 20.9471 63.5354 21.0455 63.3787C21.0496 63.3858 21.0518 63.3938 21.0518 63.402C21.0518 63.4101 21.0496 63.4182 21.0455 63.4252C20.428 64.9891 19.4943 66.4135 18.301 67.6125C17.8232 66.9401 17.4036 66.2294 17.047 65.4878C17.1841 65.6147 17.3504 65.707 17.5317 65.757C17.713 65.8069 17.9039 65.813 18.0881 65.7747C17.606 65.4112 17.2216 64.9374 16.9681 64.3945C17.1134 64.5752 17.2978 64.7219 17.5078 64.8239C17.7179 64.9258 17.9484 64.9804 18.1827 64.9838C17.9011 64.7705 17.701 64.47 17.6149 64.1309C17.7652 64.2722 17.9538 64.3678 18.158 64.4063C18.3623 64.4448 18.5735 64.4246 18.7663 64.348C17.2648 63.3226 16.0782 61.9118 15.3357 60.2693C15.4431 60.4259 15.6025 60.5409 15.7866 60.5947C15.9708 60.6484 16.1683 60.6376 16.3452 60.5639C15.9923 60.3982 15.6774 60.1636 15.4197 59.8743C15.1621 59.585 14.9672 59.2471 14.8467 58.8813C15.2174 59.3775 15.5092 59.5714 15.9509 59.4551C15.3298 59.1206 14.8616 58.5661 14.6417 57.9042C14.716 58.0348 14.8163 58.1494 14.9366 58.2411C15.0568 58.3329 15.1946 58.3999 15.3418 58.4383C15.4889 58.4766 15.6424 58.4855 15.7931 58.4643C15.9438 58.4432 16.0886 58.3925 16.219 58.3152C14.9479 58.0818 13.9295 56.4815 13.0846 55.1537C13.0593 55.1139 13.0341 55.0744 13.0091 55.0352V54.8801L12.9619 54.9576L12.9145 54.8801V55.0352C12.8979 55.0644 12.8812 55.0938 12.8645 55.1233C12.0852 56.4957 11.1365 58.1665 9.87036 58.4625C10.1361 58.5955 10.4446 58.6196 10.7284 58.5295C11.0122 58.4394 11.2481 58.2425 11.3846 57.9818C11.1875 58.6325 10.7482 59.1863 10.1543 59.5326C10.6038 59.6334 10.8799 59.4241 11.2269 58.9123C11.1227 59.2824 10.9431 59.6279 10.699 59.9278C10.455 60.2276 10.1517 60.4757 9.8073 60.657C9.9879 60.7219 10.1856 60.7243 10.3678 60.6636C10.5499 60.603 10.7056 60.483 10.8089 60.3235C10.6373 60.7359 10.4397 61.1373 10.2174 61.5254C9.82128 61.2916 9.48095 60.9767 9.21967 60.6021C8.95838 60.2274 8.78224 59.8018 8.70318 59.3543C8.89345 59.5726 9.14176 59.7347 9.42029 59.8223C9.69883 59.9099 9.99661 59.9197 10.2805 59.8505C9.53847 59.5854 8.89448 59.1074 8.43189 58.4784C7.9693 57.8493 7.70937 57.0983 7.6858 56.3224C7.69797 57.097 7.47388 57.8575 7.04233 58.5057C6.61078 59.1539 5.99163 59.6601 5.2647 59.9591C5.55043 60.0208 5.84814 60.0002 6.12228 59.8998C6.39641 59.7994 6.63533 59.6235 6.81042 59.393C6.75087 59.9184 6.55201 60.4191 6.23366 60.8451C6.11686 61.0014 5.98549 61.1456 5.84166 61.276Z" fill="white"/>
          <path d="M34.7044 63.4363C34.7077 63.4338 34.711 63.4314 34.7143 63.4289C34.7164 63.4303 34.7184 63.4316 34.7205 63.433C34.7151 63.4341 34.7098 63.4352 34.7044 63.4363Z" fill="white"/>
          <path d="M34.7044 63.4363C34.5618 63.5422 34.4119 63.6395 34.2552 63.7276H34.1448C34.0748 63.5842 34.0219 63.4333 33.9871 63.2779C34.0911 63.3537 34.2103 63.4067 34.3368 63.4335C34.4579 63.4591 34.583 63.46 34.7044 63.4363Z" fill="white"/>
          </svg>
          `
        marker.className = "custom-map-marker"

        return marker
    }

    createMap(center = [37.617635, 55.755814], zoom = 15) {
        this.ymap = new ymaps3.YMap(
            this.container,
            {
                location: {
                    center,
                    zoom
                }
            },
            [
                new ymaps3.YMapDefaultSchemeLayer({}),
                new ymaps3.YMapDefaultFeaturesLayer({ zIndex: 1800 })
            ]
        )
    }

    setLocation(center, zoom = 15) {
        if (!this.ymap) return

        this.ymap?.setLocation({
            center,
            zoom
        })
    }

    async addDefaultMarker(coordinates) {
        const { YMapDefaultMarker } = await ymaps3.import(
            "@yandex/ymaps3-markers@0.0.1"
        )
        this.ymap?.addChild(
            new YMapDefaultMarker({
                coordinates
            })
        )
    }

    addMarker(coordinates, content, props) {
        if (!this.ymap) return

        const marker = new ymaps3.YMapMarker(
            {
                coordinates,
                draggable: false,
                ...props
            },
            content
        )

        this.ymap.addChild(marker)
    }

    addMarkers(coordinates, content) {
        coordinates.forEach(coords => {
            this.addMarker(coords, content(coords))
        })
    }
}
